<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hochzeitsgeschenke</title>
    <style>
        /* Einige einfache Stile für das Layout */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .gift {
            margin-bottom: 20px;
        }
        .gift img {
            width: 300px;
            height: auto;
        }
        .thank-you {
            margin-top: 20px;
            font-size: 18px;
            color: green;
            display: none;
        }
    </style>
</head>
<body>
    <h1>Hochzeitsgeschenke</h1>

    <div id="gift-list">
        <!-- Windeln -->
        <div class="gift" id="gift-Windeln">
            <img src="https://image.eltern.de/12803790/t/yc/v3/w1440/r1.5/-/stiftung-warentest-testet-windeln.jpg" alt="Windeln">
            <p>Windeln für das erste Jahr</p>
            <p>Aktueller Betrag: <span id="currentAmount_Windeln">0</span> / 1000</p>
            <input type="number" id="donationAmount_Windeln" placeholder="Betrag eingeben" />
            <button onclick="donate('Windeln')">Betrag spenden</button>
        </div>

        <!-- Postauto -->
        <div class="gift" id="gift-Postauto">
            <img src="https://www.tramoldtimer-basel.ch/images/gut/Wagen4_wohlgemuth_ag.jpg" alt="Postauto">
            <p>Postautofahrt auf den Etzel</p>
            <p>Aktueller Betrag: <span id="currentAmount_Postauto">0</span> / 600</p>
            <input type="number" id="donationAmount_Postauto" placeholder="Betrag eingeben" />
            <button onclick="donate('Postauto')">Betrag spenden</button>
        </div>

        <!-- Ferienwohnung -->
        <div class="gift" id="gift-Ferienwohnung">
            <img src="https://www.bodenseeferien.de/storage/image/3/6/63_ferienwohnungen_bofe-header_1BVLIY_f83KGk.jpg" alt="Ferienwohnung">
            <p>Ferienwohnung für den ersten Familienurlaub</p>
            <p>Aktueller Betrag: <span id="currentAmount_Ferienwohnung">0</span> / 1500</p>
            <input type="number" id="donationAmount_Ferienwohnung" placeholder="Betrag eingeben" />
            <button onclick="donate('Ferienwohnung')">Betrag spenden</button>
        </div>

        <!-- Porsche -->
        <div class="gift" id="gift-Porsche">
            <img src="https://rsrbooking.com/storage/cars/kQ5QMHvm1s6OKHKy7c7vyTTS4QkenqNmAQHvmXB3.jpg" alt="Porsche">
            <p>Porsche GT3 RS</p>
            <p>Aktueller Betrag: <span id="currentAmount_Porsche">0</span> / 250000</p>
            <input type="number" id="donationAmount_Porsche" placeholder="Betrag eingeben" />
            <button onclick="donate('Porsche')">Betrag spenden</button>
        </div>

        <!-- Eigenheim -->
        <div class="gift" id="gift-Haus">
            <img src="https://i.ds.at/GZb8bQ/rs:fill:750:0/plain/2017/03/28/hausamland.jpg" alt="Eigenheim">
            <p>Ein Beitrag zum Traum vom Eigenheim</p>
            <p>Aktueller Betrag: <span id="currentAmount_Haus">0</span> / 2500000</p>
            <input type="number" id="donationAmount_Haus" placeholder="Betrag eingeben" />
            <button onclick="donate('Haus')">Betrag spenden</button>
        </div>
    </div>

    <!-- Dankes-Nachricht -->
    <div id="thankYouMessage" class="thank-you">
        Vielen Dank für deinen grosszügigen Beitrag! Gerne darfst du den geschenkten Betrag per Twint an Laura Heimgartner (079 843 34 90) zustellen.
    </div>

    <script>
        function donate(gift) {
            // Der eingegebene Betrag
            var amount = parseFloat(document.getElementById('donationAmount_' + gift).value);
            if (isNaN(amount) || amount <= 0) {
                alert("Bitte gib einen gültigen Betrag ein.");
                return;
            }

            // API-URL
            var apiURL = "DEIN_API_LINK";

            // Senden des Beitrags an die API
            var data = {
                gift: gift,
                amount: amount
            };

            fetch(apiURL, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                // Erfolgreich gespendet, zeige Dankestext
                document.getElementById("thankYouMessage").style.display = "block";

                // Den gespendeten Betrag im Text aktualisieren
                var currentAmount = parseFloat(document.getElementById('currentAmount_' + gift).textContent);
                document.getElementById('currentAmount_' + gift).textContent = (currentAmount + amount) + " / " + document.getElementById('maxAmount_' + gift).textContent;

                // Überprüfen, ob der Maximalbetrag erreicht ist
                var maxAmount = parseFloat(document.getElementById('maxAmount_' + gift).textContent);
                if (currentAmount + amount >= maxAmount) {
                    document.getElementById('currentAmount_' + gift).textContent = "Vollständig geschenkt";
                }
            })
            .catch(error => {
                console.error("Fehler beim Senden des Beitrags:", error);
                alert("Es gab ein Problem beim Senden des Beitrags.");
            });
        }
    </script>
</body>
</html>
